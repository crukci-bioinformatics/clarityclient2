<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) on Wed May 28 11:03:58 BST 2025 -->
<title>ClarityAPIPlaybackAspect (CRUK-CI Clarity API Client 2.31.2 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-05-28">
<meta name="description" content="declaration: module: org.cruk.clarity.api.recorder, package: org.cruk.clarity.api.playback, class: ClarityAPIPlaybackAspect">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="../../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ClarityAPIPlaybackAspect.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../../module-summary.html">org.cruk.clarity.api.recorder</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.cruk.clarity.api.playback</a></div>
<h1 title="Class ClarityAPIPlaybackAspect" class="title">Class ClarityAPIPlaybackAspect</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.cruk.clarity.api.playback.ClarityAPIPlaybackAspect</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/stereotype/Component.html" title="class or interface in org.springframework.stereotype" class="external-link">@Component</a>("clarityPlaybackAspect")
</span><span class="modifiers">public class </span><span class="element-name type-name-label">ClarityAPIPlaybackAspect</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Aspect for replaying server exchanges from a directory containing XML representations
 of entities as would be returned from a real Clarity server.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">ClarityAPIPlaybackAspect</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.io.File)" class="member-name-link">ClarityAPIPlaybackAspect</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;messageDirectory)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#blockWrite(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">blockWrite</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around methods that would cause a change in Clarity
 (create, update, delete, upload).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>&lt;E extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Locatable.html" title="interface in com.genologics.ri">Locatable</a>&gt;<br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../../../../../com.genologics.ri/com/genologics/ri/LimsLink.html" title="interface in com.genologics.ri">LimsLink</a>&lt;E&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doFind(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doFind</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the Clarity client's <code>find()</code> method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doGet(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doGet</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the Spring REST client's <code>getForObject()</code> methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/http/ResponseEntity.html" title="class or interface in org.springframework.http" class="external-link">ResponseEntity</a>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doGetEntity(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doGetEntity</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the Spring REST client's <code>getForEntity()</code> methods.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>&lt;E extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Locatable.html" title="interface in com.genologics.ri">Locatable</a>,<wbr>
L extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/LimsLink.html" title="interface in com.genologics.ri">LimsLink</a>&lt;E&gt;,<wbr>
BH extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Batch.html" title="interface in com.genologics.ri">Batch</a>&lt;L&gt;&gt;<br><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;L&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doList(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doList</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the <code>listAll</code> and <code>listSome</code> methods load the list
 of links from a serialised <code>Batch</code> object in XML file in the messages directory.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doLoadAll(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doLoadAll</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around calls to the API's <code>loadAll</code> method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doUpdate(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doUpdate</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the Clarity client's <code>update()</code> method.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doUpdateAll(org.aspectj.lang.ProceedingJoinPoint)" class="member-name-link">doUpdateAll</a><wbr>(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Join point around the Clarity client's <code>updateAll()</code> method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getMessageDirectory()" class="member-name-link">getMessageDirectory</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the directory the messages are being read from.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUpdatesDirectory()" class="member-name-link">getUpdatesDirectory</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the directory the updated entities are being written to.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isFailOnMissingSearch()" class="member-name-link">isFailOnMissingSearch</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Whether to fail if there is no result recorded for a search, or
 whether to simply return no results.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setClarityAPI(org.cruk.clarity.api.ClarityAPI)" class="member-name-link">setClarityAPI</a><wbr>(<a href="../../../../../../org.cruk.clarity.api/org/cruk/clarity/api/ClarityAPI.html" title="interface in org.cruk.clarity.api">ClarityAPI</a>&nbsp;api)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the public interface access to the API.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setClarityMarshaller(org.springframework.oxm.Marshaller)" class="member-name-link">setClarityMarshaller</a><wbr>(<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/oxm/Marshaller.html" title="class or interface in org.springframework.oxm" class="external-link">Marshaller</a>&nbsp;marshaller)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inject the JAXB marshaller.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setClarityUnmarshaller(org.springframework.oxm.Unmarshaller)" class="member-name-link">setClarityUnmarshaller</a><wbr>(<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/oxm/Unmarshaller.html" title="class or interface in org.springframework.oxm" class="external-link">Unmarshaller</a>&nbsp;unmarshaller)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Inject the JAXB unmarshaller.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFailOnMissingSearch(boolean)" class="member-name-link">setFailOnMissingSearch</a><wbr>(boolean&nbsp;failOnMissingSearch)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get whether this aspect should fail if a search doesn't have a recording.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setInternalClarityAPI(org.cruk.clarity.api.impl.ClarityAPIInternal)" class="member-name-link">setInternalClarityAPI</a><wbr>(<a href="../../../../../../org.cruk.clarity.api/org/cruk/clarity/api/impl/ClarityAPIInternal.html" title="interface in org.cruk.clarity.api.impl">ClarityAPIInternal</a>&nbsp;internalApi)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the internal interface access to the API.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setMessageDirectory(java.io.File)" class="member-name-link">setMessageDirectory</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;messageDirectory)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the directory the messages are being written to.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUpdatesDirectory(java.io.File)" class="member-name-link">setUpdatesDirectory</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;updatesDirectory)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the directory the updated entities are being written to.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>ClarityAPIPlaybackAspect</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ClarityAPIPlaybackAspect</span>()</div>
<div class="block">Constructor.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.io.File)">
<h3>ClarityAPIPlaybackAspect</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ClarityAPIPlaybackAspect</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;messageDirectory)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>messageDirectory</code> - The message directory.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getMessageDirectory()">
<h3>getMessageDirectory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a></span>&nbsp;<span class="element-name">getMessageDirectory</span>()</div>
<div class="block">Get the directory the messages are being read from.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The message directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setMessageDirectory(java.io.File)">
<h3>setMessageDirectory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setMessageDirectory</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;messageDirectory)</span></div>
<div class="block">Set the directory the messages are being written to.
 Also sets the search directory if it is not already set.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>messageDirectory</code> - The message directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUpdatesDirectory()">
<h3>getUpdatesDirectory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a></span>&nbsp;<span class="element-name">getUpdatesDirectory</span>()</div>
<div class="block">Get the directory the updated entities are being written to.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The updates directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setUpdatesDirectory(java.io.File)">
<h3>setUpdatesDirectory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUpdatesDirectory</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html" title="class or interface in java.io" class="external-link">File</a>&nbsp;updatesDirectory)</span></div>
<div class="block">Set the directory the updated entities are being written to.
 If this is set to null, no updates will be written. By default
 this is the case: one needs to set the directory to write them.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>updatesDirectory</code> - The updates directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isFailOnMissingSearch()">
<h3>isFailOnMissingSearch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isFailOnMissingSearch</span>()</div>
<div class="block">Whether to fail if there is no result recorded for a search, or
 whether to simply return no results. Saves having to save every search
 with no results, and helps when something changes to add another value
 to search for that will return nothing.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if a missing search recording will fail, false if
 it will return no results.</dd>
<dt>Since:</dt>
<dd>2.31.6</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#doFind(org.aspectj.lang.ProceedingJoinPoint)"><code>doFind(ProceedingJoinPoint)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setFailOnMissingSearch(boolean)">
<h3>setFailOnMissingSearch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setFailOnMissingSearch</span><wbr><span class="parameters">(boolean&nbsp;failOnMissingSearch)</span></div>
<div class="block">Get whether this aspect should fail if a search doesn't have a recording.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>failOnMissingSearch</code> - true if a missing search recording will fail,
 false if it will return no results.</dd>
<dt>Since:</dt>
<dd>2.31.6</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setClarityUnmarshaller(org.springframework.oxm.Unmarshaller)">
<h3>setClarityUnmarshaller</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Autowired</a>
<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Qualifier</a>("clarityJaxbUnmarshaller")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setClarityUnmarshaller</span><wbr><span class="parameters">(<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/oxm/Unmarshaller.html" title="class or interface in org.springframework.oxm" class="external-link">Unmarshaller</a>&nbsp;unmarshaller)</span></div>
<div class="block">Inject the JAXB unmarshaller.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>unmarshaller</code> - The unmarshaller.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setClarityMarshaller(org.springframework.oxm.Marshaller)">
<h3>setClarityMarshaller</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Autowired</a>
<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Qualifier</a>("clarityJaxbMarshaller")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setClarityMarshaller</span><wbr><span class="parameters">(<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/oxm/Marshaller.html" title="class or interface in org.springframework.oxm" class="external-link">Marshaller</a>&nbsp;marshaller)</span></div>
<div class="block">Inject the JAXB marshaller.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>marshaller</code> - The marshaller.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setClarityAPI(org.cruk.clarity.api.ClarityAPI)">
<h3>setClarityAPI</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Autowired</a>
<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Qualifier</a>("clarityAPI")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setClarityAPI</span><wbr><span class="parameters">(<a href="../../../../../../org.cruk.clarity.api/org/cruk/clarity/api/ClarityAPI.html" title="interface in org.cruk.clarity.api">ClarityAPI</a>&nbsp;api)</span></div>
<div class="block">Set the public interface access to the API.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>api</code> - The API bean, through its public interface.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setInternalClarityAPI(org.cruk.clarity.api.impl.ClarityAPIInternal)">
<h3>setInternalClarityAPI</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Autowired</a>
<a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html" title="class or interface in org.springframework.beans.factory.annotation" class="external-link">@Qualifier</a>("clarityAPI")
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setInternalClarityAPI</span><wbr><span class="parameters">(<a href="../../../../../../org.cruk.clarity.api/org/cruk/clarity/api/impl/ClarityAPIInternal.html" title="interface in org.cruk.clarity.api.impl">ClarityAPIInternal</a>&nbsp;internalApi)</span></div>
<div class="block">Set the internal interface access to the API.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>internalApi</code> - The API bean, but through its internal interface.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doGet(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doGet</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">doGet</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the Spring REST client's <code>getForObject()</code> methods.
 Looks for a file named with the required class's short name (no package) plus
 either its LIMS id (if there is one) or the identifier given at the end of
 the path of the URI.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Returns:</dt>
<dd>The unmarshalled entity from the file found.</dd>
<dt>Throws:</dt>
<dd><code><a href="NoRecordingException.html" title="class in org.cruk.clarity.api.playback">NoRecordingException</a></code> - if there is no file recorded for the object.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything else that fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doGetEntity(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doGetEntity</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.spring.io/spring-framework/docs/6.2.x/javadoc-api/org/springframework/http/ResponseEntity.html" title="class or interface in org.springframework.http" class="external-link">ResponseEntity</a>&lt;?&gt;</span>&nbsp;<span class="element-name">doGetEntity</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
                              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the Spring REST client's <code>getForEntity()</code> methods.
 Works as <a href="#doGet(org.aspectj.lang.ProceedingJoinPoint)"><code>doGet(ProceedingJoinPoint)</code></a>, except rather than throwing a
 <code>NoRecordingException</code>, it throws a <code>ClarityException</code> with a
 not found status. This is what would happen if the call was made to a real
 API.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Returns:</dt>
<dd>A ResponseEntity object containing the unmarshalled entity and an "OK"
 code if the file exists.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../../../org.cruk.clarity.api/org/cruk/clarity/api/ClarityException.html" title="class in org.cruk.clarity.api">ClarityException</a></code> - with a "not found" status if there is no recorded
 file for the entity.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything that fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doLoadAll(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doLoadAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;?&gt;</span>&nbsp;<span class="element-name">doLoadAll</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around calls to the API's <code>loadAll</code> method. Iterates
 through the links asking the API for them individually, before returning
 a collection of the entities.

 <p>
 This slightly convoluted route allows the cache to return cache hits
 if it is in use. The actual loading, when there is a cache miss, comes
 from the call coming through this object again but via the
 <a href="#doGet(org.aspectj.lang.ProceedingJoinPoint)"><code>doGet(ProceedingJoinPoint)</code></a> method, which loads the entity from
 file.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Returns:</dt>
<dd>A list of the entities loaded from the links.</dd>
<dt>Throws:</dt>
<dd><code><a href="NoRecordingException.html" title="class in org.cruk.clarity.api.playback">NoRecordingException</a></code> - if there is no entity file recorded for any of the links.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything else that fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doFind(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doFind</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="type-parameters">&lt;E extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Locatable.html" title="interface in com.genologics.ri">Locatable</a>&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../../../../../com.genologics.ri/com/genologics/ri/LimsLink.html" title="interface in com.genologics.ri">LimsLink</a>&lt;E&gt;&gt;</span>&nbsp;<span class="element-name">doFind</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
                                               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the Clarity client's <code>find()</code> method. Tries to find
 a prerecorded search in the search directory that matches the search parameters
 of this call.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>E</code> - The type of entity being searched for.</dd>
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Returns:</dt>
<dd>The result of the search (a list of links).</dd>
<dt>Throws:</dt>
<dd><code><a href="NoRecordingException.html" title="class in org.cruk.clarity.api.playback">NoRecordingException</a></code> - if there is no search recorded for the parameters
 given and the aspect is set to fail on no recorded search.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything else that fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doList(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doList</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="type-parameters-long">&lt;E extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Locatable.html" title="interface in com.genologics.ri">Locatable</a>,<wbr>
L extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/LimsLink.html" title="interface in com.genologics.ri">LimsLink</a>&lt;E&gt;,<wbr>
BH extends <a href="../../../../../../com.genologics.ri/com/genologics/ri/Batch.html" title="interface in com.genologics.ri">Batch</a>&lt;L&gt;&gt;</span>
<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;L&gt;</span>&nbsp;<span class="element-name">doList</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the <code>listAll</code> and <code>listSome</code> methods load the list
 of links from a serialised <code>Batch</code> object in XML file in the messages directory.

 <p>
 No reference is made to the numbers in the <code>listSome</code> parameters. All the links
 stored in the file are returned regardless.
 </p></div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>E</code> - The type of entity to list.</dd>
<dd><code>L</code> - The type of link to the entity returned from the API.</dd>
<dd><code>BH</code> - The batch class that is used to hold the links returned from the API.</dd>
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Returns:</dt>
<dd>The result of the search (a list of links). If there was no file recorded
 for a list of these entities, an empty list is returned.</dd>
<dt>Throws:</dt>
<dd><code><a href="NoRecordingException.html" title="class in org.cruk.clarity.api.playback">NoRecordingException</a></code> - if there is no list recorded for this type of entity.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is an error invoking the underlying method.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="blockWrite(org.aspectj.lang.ProceedingJoinPoint)">
<h3>blockWrite</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">blockWrite</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span></div>
<div class="block">Join point around methods that would cause a change in Clarity
 (create, update, delete, upload). These methods are not helpful when running
 from prerecorded messages, and should be quietly ignored (a warning is logged).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doUpdate(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doUpdate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doUpdate</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the Clarity client's <code>update()</code> method.
 Writes to the message directory this new version of the entity. There will
 be versions of the entity written to the directory, incrementing with each
 call.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doUpdateAll(org.aspectj.lang.ProceedingJoinPoint)">
<h3>doUpdateAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doUpdateAll</span><wbr><span class="parameters">(org.aspectj.lang.ProceedingJoinPoint&nbsp;pjp)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Join point around the Clarity client's <code>updateAll()</code> method.
 Writes to the message directory the new versions of the entities. There will
 be versions of each entity written to the directory, incrementing with each
 call (numbers per entity, not an overall counter).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pjp</code> - The join point.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code> - if there is anything fails.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2013&#x2013;2025 <a href="https://www.cruk.cam.ac.uk/">Cancer Research UK Cambridge Institute</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
